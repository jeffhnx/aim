-- Variables
local aimbotEnabled = false -- Controls the toggle state of the aimbot
local highlightObjects = {} -- Table to hold all highlight objects

-- Keybind for toggling the aimbot
local toggleKey = Enum.UserInputType.MouseButton2 -- Right-click

-- Function to highlight all players
local function highlightAllPlayers()
    -- Remove any existing highlights
    for _, highlight in pairs(highlightObjects) do
        if highlight then
            highlight:Destroy()
        end
    end
    -- Clear the table
    highlightObjects = {}

    -- Loop through all players
    local players = game.Players:GetPlayers()
    local localPlayer = game.Players.LocalPlayer

    for _, player in pairs(players) do
        if player ~= localPlayer and player.Character then
            -- Create a new Highlight object for each player
            local highlight = Instance.new("Highlight")
            highlight.Adornee = player.Character -- Attach to the player's character
            highlight.FillColor = Color3.new(1, 0, 0) -- Red color
            highlight.FillTransparency = 0.5 -- Slight transparency
            highlight.OutlineTransparency = 1 -- Hide the outline
            highlight.Parent = player.Character -- Parent it to the player's character

            -- Add the highlight to the table to track it
            table.insert(highlightObjects, highlight)
        end
    end
end

-- Function to remove all highlights
local function removeAllHighlights()
    for _, highlight in pairs(highlightObjects) do
        if highlight then
            highlight:Destroy() -- Destroy the highlight object
        end
    end
    highlightObjects = {} -- Clear the table
end

-- Toggle aimbot (and highlights) on right-click
game:GetService("UserInputService").InputBegan:Connect(function(input)
    if input.UserInputType == toggleKey then
        aimbotEnabled = not aimbotEnabled -- Toggle the aimbot
        if aimbotEnabled then
            highlightAllPlayers() -- Highlight all players
        else
            removeAllHighlights() -- Remove all highlights when disabled
        end
    end
end)
